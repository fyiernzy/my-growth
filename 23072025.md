23072025
General range definition
自动化测试框架
Logging as asynchronous 
@Por

Testing + load tests
Config explanation
README


Checkstyle
Splotless
Google java format
Sonarcube
ErrorProne

.editorconfig
[*.java]

# Basic indentation settings
indent_style = space
indent_size = 4
ij_continuation_indent_size = 4
ij_java_use_relative_indents = true
ij_java_keep_indents_on_empty_lines = true
max_line_length = 100
ij_java_class_count_to_use_import_on_demand = unset
ij_java_names_count_to_use_import_on_demand = unset

# Disable vertical alignment (Prefers indents over alignment)
ij_java_align_multiline_parameters = false
ij_java_align_multiline_chained_methods = false
ij_java_align_multiline_binary_operation = false
ij_java_align_multiline_parenthesized_expression = false
ij_java_align_multiline_resources = false
ij_java_align_multiline_ternary_operation = false
ij_java_align_multiline_text_blocks = false
ij_java_align_multiline_array_initializer_expression = false
ij_java_align_multiline_assignment = false
ij_java_align_multiline_parameters_in_calls = false
ij_java_align_multiline_method_parentheses = false
ij_java_align_multiline_annotation_parameters = false
ij_java_align_multiline_records = false
ij_java_align_types_in_multi_catch = false
ij_java_align_throws_keyword = false
ij_java_align_group_field_declarations = false

# Method chain and builder methods
ij_java_method_call_chain_wrap = normal
ij_java_keep_builder_methods_indents = true


Project_Default.xml
<component name="InspectionProjectProfileManager">
  <profile version="1.0">
    <option name="myName" value="Project Default" />
    <inspection_tool class="SerializableHasSerialVersionUIDField" enabled="true" level="WARNING" enabled_by_default="true" />
    <inspection_tool class="MagicNumber" enabled="true" level="WARNING" enabled_by_default="true" />
    <inspection_tool class="ControlFlowStatementWithoutBraces" enabled="true" level="WARNING" enabled_by_default="true" />
  </profile>
</component>

Project.xml
<component name="ProjectCodeStyleConfiguration">
  <code_scheme name="Project" version="173">
    <editorconfig>
      <option name="ENABLED" value="false" />
    </editorconfig>
    <codeStyleSettings language="JAVA">
      <option name="SPACE_WITHIN_ARRAY_INITIALIZER_BRACES" value="true" />
      <arrangement>
        <rules>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <PUBLIC>true</PUBLIC>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <PROTECTED>true</PROTECTED>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <PACKAGE_PRIVATE>true</PACKAGE_PRIVATE>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <PRIVATE>true</PRIVATE>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <PUBLIC>true</PUBLIC>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <PROTECTED>true</PROTECTED>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <PACKAGE_PRIVATE>true</PACKAGE_PRIVATE>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <PRIVATE>true</PRIVATE>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <INITIALIZER_BLOCK>true</INITIALIZER_BLOCK>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <PUBLIC>true</PUBLIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <PROTECTED>true</PROTECTED>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <PACKAGE_PRIVATE>true</PACKAGE_PRIVATE>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <NAME>.*Service$</NAME>
                  <PRIVATE>true</PRIVATE>
                </AND>
              </match>
              <order>BY_NAME</order>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <NAME>.*Validator$</NAME>
                  <PRIVATE>true</PRIVATE>
                </AND>
              </match>
              <order>BY_NAME</order>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <NAME>.*Dao$</NAME>
                  <PRIVATE>true</PRIVATE>
                </AND>
              </match>
              <order>BY_NAME</order>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <NAME>.*Repository$</NAME>
                  <PRIVATE>true</PRIVATE>
                </AND>
              </match>
              <order>BY_NAME</order>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <NAME>.*Mapper$</NAME>
                  <PRIVATE>true</PRIVATE>
                </AND>
              </match>
              <order>BY_NAME</order>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <FINAL>true</FINAL>
                  <PRIVATE>true</PRIVATE>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <PUBLIC>true</PUBLIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <PROTECTED>true</PROTECTED>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <PACKAGE_PRIVATE>true</PACKAGE_PRIVATE>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <FIELD>true</FIELD>
                  <PRIVATE>true</PRIVATE>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <FIELD>true</FIELD>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <INITIALIZER_BLOCK>true</INITIALIZER_BLOCK>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <CONSTRUCTOR>true</CONSTRUCTOR>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <METHOD>true</METHOD>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <METHOD>true</METHOD>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <ENUM>true</ENUM>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <INTERFACE>true</INTERFACE>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <AND>
                  <CLASS>true</CLASS>
                  <STATIC>true</STATIC>
                </AND>
              </match>
            </rule>
          </section>
          <section>
            <rule>
              <match>
                <CLASS>true</CLASS>
              </match>
            </rule>
          </section>
        </rules>
      </arrangement>
    </codeStyleSettings>
  </code_scheme>
</component>





Springboot note
/actuator/health
/actuator/info

Update application.properties to include health, info

```java
management.endpoints.web.exposure.include=health, info
management.info.env.enabled=true
info.app.name
# customise the info’s data ourselves
```

Sb springboot actuator endpoint (include, exclude, available endpoints)
Sb actuator security

Sb server.port
Sb server.servlet.context-path=/
server.servlet.session-timeout
Db data source url
@SpringbootApplication(scanBasePackages={})

@Primary + @Qualifier, Qualifier > Primary
@Lazy (create a component only when required) (spring.main.lazy-initialization=true)
- Slower request and can result in request timeout since the bean is not created first
- Cannot discover config issues at initialization stage
- Cannot guarantee to have enough memory for the bean creation


Bean scope @Scope(ConfigurableBeanFactory.SCOPE_)
- Singleton (only one)
- Prototype (per req)
- Request (per web request)
- Session (per user session)
- Application (per servlet context)


Bean lifecycle method (initialisation, destruction), @PostConstruct, @PreDestroy
For "prototype" scoped beans, Spring does not call the destroy method. Gasp! 
---
In contrast to the other scopes, Spring does not manage the complete lifecycle of a prototype bean: the container instantiates, configures, and otherwise assembles a prototype object, and hands it to the client, with no further record of that prototype instance.
Thus, although initialization lifecycle callback methods are called on all objects regardless of scope, in the case of prototypes, configured destruction lifecycle callbacks are not called. The client code must clean up prototype-scoped objects and release expensive resources that the prototype bean(s) are holding.

Java Config Bean
@Configutation > @Bean (method name = bean name)
```
@Bean
public Coach swimCoach() {
	return new SwimCoach();
}
```
beanName = swimCoach (used in @Qualifier)
- For third party source code (when we cannot use @Component/@Service, etc.) but we want to make it be a Spring Bean


Hibernate handles low level code, minimising JDBC code
Hibernate provides ORM
JPA (Jakarta Persistence API, JPA) - standard api for ORM
Only a specification defining a set of interfaces, requiring implementation to make it usable
Portable code, flexible vendor 
‘@ControllerAdvice @ExceptionHandler
REST API - api/<noun>/attribute + HTTP Method (Post, Get, etc.)
Spring data rest

Spring Security 
Spring Security Filters -> protected web resources
Spring Security Filters -> protected web resources > security configuration

Is web res protected? -> is user authenticated? (Proceed/ send to login form)-> is used authorised? (Show res, access denied)

Declarative security - @Configuration
Programmatic Security

requestMatchers(method, api).hasRole/.hasAnyRole
CSRF Protection for browser based
Bcrypt encryption why crypt, bcrypt algo analysis, password hashing best practices


@JoinColumn(name), @OneToMany(cascade, fetch), @ManyToOne, @JoinTable (for @ManyToMany) - name, joinColumns, inverseJoinColumns & mappedBy (depends on scenario, sometimes mapped by shud be enuf, for example (often need helper method to update at both in memory and in db at the same time)
Calling CRUD on non-owning side (mappedBy) will have no effect on the db relationship
- Lazy loading
- Cascading (study cascade type and their effects)

AOP https://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/aop.html
- Pointcut
- Advice
- @Before, @After, @Around
- JoinPoint

- Aspect: A modularisation of a concern that cuts across multiple classes
- Class (@Aspect, @Component) - LoggingAspect
- @Pointcut  A point during the execution of a program - at where (a regex, a package, a class, a method, an annotation?)
- Advice: Action taken by an aspect at a particular join point. @Around @Before @After @AfterReturning @AfterThrowing
- @Order

Course
Custom tables (query & security config -> need study)

.git-templates
Git commit hook

Git config —list
Git config —local issue.id
Git config —unset issue.id

Intermediate Course in SpringBoot
- AOP (How to write complicated & test it, like basic concepts + read arguments with join points))
- Spring Security (How to write complicated & test it)
- Spring Data JPA (Relationship, Inheritance, @Query, Specification/Example, Pageable)
