1 October

Today’s Work
1. RequestWrapper, ErrorResponseWrapper
2. GlobalFilters (Metrics, Logging, + OpenTelemetry) + Industry Practices
3. Utils (Comprehensive) + Gateway Filters
4. Documents Finding

Gateway
1. Documentation
    1. Convention
2. Development (+ Well documented + Testing Docs)
    1. Utils + Benchmarking
        1. RequestWrapper
        2. ResponseWrapper: ErrorResponse, ProblemDetail (RFC7807 compliant) + Extension Point for customised fields.
            1. RequestWrapper: Complete, Comprehensive, Annotated Wrapper, with Performance Consideration
            2. ErrorResponseWrapper: ErrorResponse, ProblemDetail, + Customized Fields.
        3. SecurityUtils + Base64Utils + EncryptionUtils, JsonUtil
    2. Gateway Filters
    3. Global Filters
        1. Observability (Traces, Metrics, Logging)
            1. LoggingFilter
            2. HttpMetricFilter + Study industry practices
    4. Resilience: Fallback, FeignClientRetryer, Rate Limiting
    5. KIV
        1. Token Relay
        2. PropertiesLogger
        3. DefaultConfig
        4. StopWatchUtikl
    6. Infrastructure: EnableFiltersSupport
    7. Testing
        1. Testing Service 
        2. Auth Service
    - Current Approach & Suggested Approach of FxtsWays

References
1. Bank-api-ws
    - [x] GlobalErrorAttributes
    - [x] (Deprecated - business specific) BankApiHeaderFilter
    - [x] LoggingFilter
    - [x] GatewayFilterHelper
    - [x] RequestHelper
    1. Utils
        - [x] (Deprecated) DateTimeUtil
        - [x] ayJsonUtil
        - [x] (Deprecated) StopWatchUtil
        - [x] StringsUtil (ValueUtils)
    - [x] Filters
        - [x] RequestSigningFilter
        - [x] RewriteByteRequestBodyFilter
        - [x] RewriteRequestyBodyFilter
        - [x] RewriteResponseBodyFilter
        - [x] ReadRequestBodyFilter
        - [x] ReadByteRequestBodyFilter
    1. Services
        1. RequestSigningService
2. Integration-api-ws
    1. Filters
        1. SecureFilter
        2. Decryption
            1. RequestBodyDecryptRewrite
            2. RequestParamDecryptionGatewayFilter
            3. ResponseBodyDecryptionRewrite
        3. Encryption
            1. RequestBodyEncryptionRewrite
            2. RequestEncryption
            3. RequestParamEncryption
            4. ResponseBodyEncryptionRewrite
    2. Support oath token flexibility (but it should be)
    3. FeignClientRetryer
    - [x] GatewayMetricsConfiguration
    1. LoggingFilter
    2. SecretkeyService
    3. ApiConstant
    4. OpenFeignPathConstant
    5. OAuthController
    6. EncryptionUtil
    7. OZoneApiResponseBodyRewrite
    8. ValidationGlobalFilter
    - [x] LoggingGlobalFilter
    1. SumsubWebhookFilter

Next step:
1. Configure Micrometer, Prometheus, OpenTelemetry + Feign (Retry + Fallback) for Observability
2. Complete the Utils
3. Keep the useful constants and find alternative
- [ ] Testing on Gatewayfilters/ Global Filters 

Auto Import
Manual Import

Security
1. Documentation
    1. Type: Discovery
        1. Provides a document that links to all other documents
    2. Type: Security
        1. In the document, provide the exact version of Spring Security, SpringBoot, Spring Cloud Gateway, Spring Authorisation Server, Spring OAuth Client, Spring OAuth Resource version to be used.
        2. Study the available algorithms and the industrial standard for client secret generation and encryption with its configuration setup.
        3. Include any RFC/ OWASP/ OAuth2.0 resources to improve the credibility.
        4. API Specification (What are exposed, what are hidden, how they are hidden, justification and explanation).
        5. Token Settings & Client Settings & Justification (Default, Stricter, Looser) 
        6. How IAM service can be provided and what’s its roles.
    3. Type: Guideline/ Study
        1. Draw a Sequence Diagram to illustrate how other internal services and external services could request for the token (Create/ Refresh Token)
            1. Client Side
            2. Internal Mechanism Study
        2. Encryption Algorithm & Study
    4. Type: Solution Design/ Convention/ Guideline/ Demo
        1. How to perform changes to SecurityFilterChain
        2. What are the convention available and why.
2. Code
    1. Type: Generator
        1. TokenSettings/ ClientSettings Generator
        2. Generate SQL from RegisteredClient
        3. Generate RegisteredClient from SQL
        4. Generate Client Secret/ Encryption
        5. Constants: Default Token Settings
    2. Type: Util

Testing
1. Gateway
2. Security
